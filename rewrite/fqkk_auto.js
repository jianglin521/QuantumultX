
/*
重写（v2p加上重写，安卓机也能使用该脚本功能）
^http://.+/(task/read|t/show.html)\? url script-response-body fqkk_auto.js
^http://.+/fast_reada/j?\? url script-response-header fqkk_auto.js
^http://.+/mock/read url script-analyze-echo-response fqkk_auto.js
*/


var _0xodK='jsjiami.com.v6',_0xodK_=['‮_0xodK'],_0x5402=[_0xodK,'bMO3e8Kv','JGEo','QUTCtcKoNw==','eG1SwoTCvg==','LsO8wqR0woE=','wqvDvTo=','wqg2OsK9WsKJew==','w4Ece2PDsg==','RE3ChcKfMQ==','KxfDrMK0Dg==','w4bDiCc7Aw==','ElPDlQ==','5p615qGs5p615YmR5b+16LS66L+E55qq5b6J5L6w5pSs56qHAcOUw5fvvIPDvw==','wq/Co2vCqDpXKA==','w74UcW3Dn0E2','bTrCqcK0','UEl6ehU=','YDvCo8K0wo8+Lw==','wrMbM0MeZzQ=','w4AuOHLDtV57IxrCuTMGIFrDusKPWlE=','FEQeccK8QA==','wpx0BRE=','UDg9w5/Dqw==','w6gQU0bDug==','cWNSfjM=','w5w6fA==','K8K0w7s=','MT48LMOB','akUiw4Q=','5L2B5pe1eBHCpuWmu+i0uQ==','VMKYwqrCgwTCqsKZZcK+','ARHDv8K6OcO1Vg==','wr3DriLDocKb','woVROk3Ds8Kc','wqHCr2TCrTNJIg==','6Zul6Kyy6IWD5YqU6L2R5Zul','bMOtwqUSCA==','f3BBwoHCmA==','DQU7CMKcf3VzVsOQw7vDl8KcwpjCmw==','T3/DssKCwr3DvcOnZEk=','UcOLwrkxW8Ooe15iJ8Oxw7sVw6/CqTQow5hlw7nDqsK/bwRkADkuwocmw7PCsA==','fmdrJ8OJwqMVJ8Kww63CkSh5wqNPw68=','wo3DrAc=','woBQOW3DucKhSQ==','wp3Dn2ZAeg==','JsKQw6fDqsK0','S8OeZcKwQw==','JMOLwpfDuiM=','NMOswqnDpjRaw7I=','wqkgF8K2UMKV','a8OlR8K/WMOfw5U=','dHtFQU4=','KnNwCcOX','AsOBHxVG','w40nfnQ=','MENYCsOH','jsjiaVrpNmi.Ycom.gv6ykMDXdYPpg=='];if(function(_0xd9866c,_0x8374eb,_0x547519){function _0x41b9ec(_0x1f8ebd,_0x304b50,_0x461df1,_0x31b0a6,_0x1a96e2,_0x55f08c){_0x304b50=_0x304b50>>0x8,_0x1a96e2='po';var _0x289965='shift',_0x29c56a='push',_0x55f08c='‮';if(_0x304b50<_0x1f8ebd){while(--_0x1f8ebd){_0x31b0a6=_0xd9866c[_0x289965]();if(_0x304b50===_0x1f8ebd&&_0x55f08c==='‮'&&_0x55f08c['length']===0x1){_0x304b50=_0x31b0a6,_0x461df1=_0xd9866c[_0x1a96e2+'p']();}else if(_0x304b50&&_0x461df1['replace'](/[VrpNYgykMDXdYPpg=]/g,'')===_0x304b50){_0xd9866c[_0x29c56a](_0x31b0a6);}}_0xd9866c[_0x29c56a](_0xd9866c[_0x289965]());}return 0xbb2c7;};return _0x41b9ec(++_0x8374eb,_0x547519)>>_0x8374eb^_0x547519;}(_0x5402,0x1e3,0x1e300),_0x5402){_0xodK_=_0x5402['length']^0x1e3;};function _0x26b4(_0x2f91d2,_0x58c32e){_0x2f91d2=~~'0x'['concat'](_0x2f91d2['slice'](0x1));var _0x4eab7c=_0x5402[_0x2f91d2];if(_0x26b4['lHxYXv']===undefined){(function(){var _0x2f9836=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0xc65427='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x2f9836['atob']||(_0x2f9836['atob']=function(_0x5763f2){var _0x59249a=String(_0x5763f2)['replace'](/=+$/,'');for(var _0x1a5c84=0x0,_0x576319,_0x80d52c,_0x194386=0x0,_0x17de4a='';_0x80d52c=_0x59249a['charAt'](_0x194386++);~_0x80d52c&&(_0x576319=_0x1a5c84%0x4?_0x576319*0x40+_0x80d52c:_0x80d52c,_0x1a5c84++%0x4)?_0x17de4a+=String['fromCharCode'](0xff&_0x576319>>(-0x2*_0x1a5c84&0x6)):0x0){_0x80d52c=_0xc65427['indexOf'](_0x80d52c);}return _0x17de4a;});}());function _0x47f89d(_0x504063,_0x58c32e){var _0x54da22=[],_0x8b419=0x0,_0x5c8510,_0x20e395='',_0x2c06de='';_0x504063=atob(_0x504063);for(var _0x3ac2a3=0x0,_0x347170=_0x504063['length'];_0x3ac2a3<_0x347170;_0x3ac2a3++){_0x2c06de+='%'+('00'+_0x504063['charCodeAt'](_0x3ac2a3)['toString'](0x10))['slice'](-0x2);}_0x504063=decodeURIComponent(_0x2c06de);for(var _0x1a9ba5=0x0;_0x1a9ba5<0x100;_0x1a9ba5++){_0x54da22[_0x1a9ba5]=_0x1a9ba5;}for(_0x1a9ba5=0x0;_0x1a9ba5<0x100;_0x1a9ba5++){_0x8b419=(_0x8b419+_0x54da22[_0x1a9ba5]+_0x58c32e['charCodeAt'](_0x1a9ba5%_0x58c32e['length']))%0x100;_0x5c8510=_0x54da22[_0x1a9ba5];_0x54da22[_0x1a9ba5]=_0x54da22[_0x8b419];_0x54da22[_0x8b419]=_0x5c8510;}_0x1a9ba5=0x0;_0x8b419=0x0;for(var _0x2a0efc=0x0;_0x2a0efc<_0x504063['length'];_0x2a0efc++){_0x1a9ba5=(_0x1a9ba5+0x1)%0x100;_0x8b419=(_0x8b419+_0x54da22[_0x1a9ba5])%0x100;_0x5c8510=_0x54da22[_0x1a9ba5];_0x54da22[_0x1a9ba5]=_0x54da22[_0x8b419];_0x54da22[_0x8b419]=_0x5c8510;_0x20e395+=String['fromCharCode'](_0x504063['charCodeAt'](_0x2a0efc)^_0x54da22[(_0x54da22[_0x1a9ba5]+_0x54da22[_0x8b419])%0x100]);}return _0x20e395;}_0x26b4['dqLBQT']=_0x47f89d;_0x26b4['DxmpCB']={};_0x26b4['lHxYXv']=!![];}var _0x37c481=_0x26b4['DxmpCB'][_0x2f91d2];if(_0x37c481===undefined){if(_0x26b4['RvIjmW']===undefined){_0x26b4['RvIjmW']=!![];}_0x4eab7c=_0x26b4['dqLBQT'](_0x4eab7c,_0x58c32e);_0x26b4['DxmpCB'][_0x2f91d2]=_0x4eab7c;}else{_0x4eab7c=_0x37c481;}return _0x4eab7c;};const $=new Env(_0x26b4('‫0','H5)k'));!(async()=>{var _0x2f59e9={'jBRkR':function(_0xe6c691,_0x27a8da){return _0xe6c691!==_0x27a8da;},'lpjAi':'/mock/read','xVpAl':'iAuuz','IHszz':_0x26b4('‫1','QAt!'),'vkAER':'Close','yTmie':'text/html;\x20charset=utf-8','rHqaw':function(_0x14b2f1,_0x470049){return _0x14b2f1===_0x470049;},'OfeDZ':_0x26b4('‫2','%MfK'),'ManJR':_0x26b4('‮3','9S%E'),'PLULd':function(_0x8da991,_0x47fa30){return _0x8da991!==_0x47fa30;},'tJpeB':_0x26b4('‮4','xJ(u'),'hTkro':'Location','qfcCt':_0x26b4('‮5','QAt!'),'BcrjR':function(_0x4e50b3,_0x2b9718){return _0x4e50b3!==_0x2b9718;},'YdwZs':'qFLKC','UEgfL':function(_0x542e30,_0x5014c0){return _0x542e30>_0x5014c0;},'wYQtS':_0x26b4('‫6','1@Uk'),'AXCWg':function(_0x4efa37,_0x4e1bbb){return _0x4efa37&&_0x4e1bbb;}};if(_0x2f59e9['jBRkR'](typeof $request,'undefined')){if($request[_0x26b4('‮7','**]r')][_0x26b4('‫8','NJak')](_0x2f59e9[_0x26b4('‫9','l$k(')])>0x0){if(_0x2f59e9[_0x26b4('‫a','vKBm')]!==_0x2f59e9[_0x26b4('‮b',']%^#')]){let _0x10a9b0='\x0a\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<meta\x20charset=\x22UTF-8\x22>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20div\x20{position:absolute;\x20top:50%;\x20left:50%;\x20margin:0\x200\x200\x20-234px;\x20width:auto;\x20height:auto;\x20border:0px\x20solid\x20#008800;\x20font-size:\x207vw}\x0a\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20<body><div\x20id=\x22timer\x22></div></body>\x0a\x20\x20\x20\x20\x20\x20<script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20var\x20oBox=\x20document.getElementById(\x27timer\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20var\x20maxtime\x20=\x20parseInt(Math.random()\x20*\x20(10\x20-\x209\x20+\x201)\x20+\x209\x20+\x201,\x2012)-\x206;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20setTimeout(()=>window.history.back(),maxtime*800);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20function\x20CountDown()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(maxtime\x20>=\x200)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20oBox.innerHTML\x20=\x20\x27返回倒计时\x27+maxtime+\x27秒\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20--maxtime;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20clearInterval(timer);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20window.history.back();\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20timer\x20=\x20setInterval(\x22CountDown()\x22,\x201000);\x0a\x20\x20\x20\x20\x20\x20\x20\x20</script>\x0a\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20';const _0x4f0717={'Connection':_0x2f59e9['vkAER'],'Content-Type':_0x2f59e9[_0x26b4('‮c','$99U')]};if($[_0x26b4('‫d','$99U')]()||$[_0x26b4('‮e','PxyC')]()){$['done']({'response':{'status':0xc8,'headers':_0x4f0717,'body':_0x10a9b0}});}else if($[_0x26b4('‮f',']%^#')]()){if(_0x2f59e9[_0x26b4('‫10',']F^c')](_0x26b4('‫11','RQB2'),_0x2f59e9[_0x26b4('‫12','5v5e')])){$[_0x26b4('‮13','hdFg')]({'status':_0x2f59e9[_0x26b4('‮14','RQB2')],'headers':_0x4f0717,'body':_0x10a9b0});}else{$['msg']($[_0x26b4('‫15',']%^#')],'修改url失败',_0x10a9b0);}}}else{json[_0x26b4('‫16','1@Uk')]=newUrl;body=callback+'('+$[_0x26b4('‫17','Xzbs')](json)+')';$['done']({'body':body});}}else if(_0x2f59e9[_0x26b4('‮18','%MfK')](typeof $response,_0x2f59e9[_0x26b4('‮19','xyAX')])){let _0x1dfcc4=$request[_0x26b4('‮1a','3r!S')];let _0x10a9b0=$response['body']||'';let _0x5b9697=$response['headers']&&$response[_0x26b4('‫1b','PxyC')][_0x2f59e9[_0x26b4('‮1c','hdFg')]]||'';let _0xa9079d=_0x2f59e9[_0x26b4('‮1d','Xzbs')];if(_0x5b9697['match'](/https?:\/\/mp\.weixin\.qq\.com\/s/)){if(_0x2f59e9[_0x26b4('‫1e','5Fsg')](_0x2f59e9[_0x26b4('‫1f','lBkO')],_0x2f59e9['YdwZs'])){$[_0x26b4('‫20',')l1b')](_0x26b4('‮21','lBkO')+JSON['stringify']($response[_0x26b4('‮22','ehmr')],null,0x2));}else{$response[_0x26b4('‮23','Vm0q')][_0x2f59e9['hTkro']]=_0xa9079d;$[_0x26b4('‮24','q5e1')]({'headers':$response['headers']});}}else if(_0x2f59e9[_0x26b4('‫25','AqvX')](_0x1dfcc4[_0x26b4('‮26','q5e1')](_0x2f59e9['wYQtS']),0x0)&&_0x10a9b0){_0x10a9b0=_0x10a9b0[_0x26b4('‫27','8eMn')](_0x26b4('‫28','hdFg'),_0x26b4('‫29','RQB2'));$[_0x26b4('‫2a','u5cZ')]({'body':_0x10a9b0});}else{let [,_0x10970d,_0x52fda8]=_0x10a9b0[_0x26b4('‫2b','8&xS')](/^(\w+)\(({[^()]+})\)$/)||['','',''];if(_0x2f59e9[_0x26b4('‮2c','hdFg')](_0x10970d,_0x52fda8)){_0x52fda8=$[_0x26b4('‫2d','AqvX')](_0x52fda8,{});if(_0x52fda8[_0x26b4('‫2e','hdFg')]){_0x52fda8[_0x26b4('‮2f','vKBm')]=_0xa9079d;_0x10a9b0=_0x10970d+'('+$[_0x26b4('‮30','9S%E')](_0x52fda8)+')';$['done']({'body':_0x10a9b0});}else{$['msg']($[_0x26b4('‮31','ySe8')],_0x26b4('‫32','19jB'),_0x10a9b0);}}else{$['log']('未检查到待跳转的微信文章url：\x0a'+JSON[_0x26b4('‮33','Fre3')]($response[_0x26b4('‮34','5Fsg')],null,0x2));}}}}})()[_0x26b4('‫35','3r!S')](_0xbcc0ab=>$[_0x26b4('‫36','NJak')](_0xbcc0ab))[_0x26b4('‫37','ehmr')](()=>$['done']());;_0xodK='jsjiami.com.v6';


function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`\ud83d\udd14${this.name}, \u5f00\u59cb!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}isShadowrocket(){return"undefined"!=typeof $rocket}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),a={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(a,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:i,...r}=t;this.got[s](i,r).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,t.stack):this.log("",`\u2757\ufe0f${this.name}, \u9519\u8bef!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
